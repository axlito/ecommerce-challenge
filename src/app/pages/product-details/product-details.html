<section class="flex flex-col w-full max-w-5xl mt-4 justify-start mx-auto gap-4">
    <breadcrumb [routes]="routes"></breadcrumb>
    @if (appStore.selected_product()) {
        <div class="flex flex-row h-auto w-full overflow-hidden my-10">
            <div class="flex w-2/5 h-auto aspect-square justify-center items-center p-4 bg-neutral-100">
                <img [src]="appStore.selected_product()!.image" [alt]="appStore.selected_product()!.title" class="w-auto h-80 object-cover">
            </div>
            <div class="flex flex-col w-3/5 h-auto gap-2 px-4 py-2">
                <h2 class="font-semibold text-lg line-clamp-1">{{ appStore.selected_product()!.title }}</h2>
                <div class="flex flex-row gap-0.5 items-center w-full">
                    <span class="font-bold text-xs mr-0.5 text-neutral-500">{{ appStore.selected_product()!.rating.rate }}</span>
                    <span class="font-bold text-xs mr-1 text-neutral-500">({{ appStore.selected_product()!.rating.count }})</span>
                    <rating-stars [rating]="appStore.selected_product()!.rating.rate"></rating-stars>
                    <span class="flex ms-auto w-fit h-fit text-xs font-semibold capitalize bg-neutral-300 text-neutral-700 rounded-2xl px-2.5 py-0.5">
                        {{ appStore.selected_product()!.category }}
                    </span>
                </div>
                <p class="text-2xl font-bold tracking-tight text-neutral-800">{{ appStore.selected_product()!.price | currency: 'USD' }}</p>
                <p class="font-normal text-base text-neutral-800">{{ appStore.selected_product()!.description }}</p>
                @if (appStore.userIsAuthenticated()) {
                    <button (click)="addProductToCart(appStore.selected_product()?.id!)" class="cursor-pointer flex w-fit h-fit font-semibold capitalize bg-blue-600/80 hover:bg-blue-700 text-white rounded-2xl px-4 py-1 my-6">Add to cart</button>
                }
            </div>
        </div>
        <h2 class="mt-10 text-lg font-semibold">Other products in {{ appStore.selected_product()?.category }} category</h2>
        <div class="grid grid-cols-3 gap-3 mb-28">
            @for (related of appStore.related_product_list().values(); track $index) {
                <product-card [product]="related"></product-card>
            }
        </div>

    }

</section>